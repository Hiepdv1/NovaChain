version: "2"

sql:
  - engine: "postgresql"
    queries: "db/chain/query.sql"
    schema: "db/chain/schema.sql"
    gen:
      go:
        package: "dbchain"
        out: "internal/db/chain"
        emit_prepared_queries: false
        overrides:
          - db_type: "jsonb"
            go_type: "encoding/json.RawMessage"
          - db_type: "text"
            go_type: "string"

  - engine: "postgresql"
    queries:
      - "db/pendingTx/queries/pending_transactions.sql"
      - "db/pendingTx/queries/pending_tx_data.sql"
    schema: "db/pendingTx/schema.sql"
    gen:
      go:
        package: "dbPendingTx"
        out: "internal/db/pendingTx"
        overrides:
          - db_type: "jsonb"
            go_type: "encoding/json.RawMessage"
          - db_type: "text"
            go_type: "string"

  - engine: "postgresql"
    queries: "db/utxo/query.sql"
    schema: "db/utxo/schema.sql"
    gen:
      go:
        package: "dbutxo"
        out: "internal/db/utxo"
        overrides:
          - db_type: "jsonb"
            go_type: "encoding/json.RawMessage"
          - db_type: "text"
            go_type: "string"
      
  - engine: "postgresql"
    queries: "db/wallet/query.sql"
    schema: "db/wallet/schema.sql"
    gen:
      go:
        package: "dbwallet"
        out: "internal/db/wallet"
        overrides:
          - db_type: "jsonb"
            go_type: "encoding/json.RawMessage"
          - db_type: "text"
            go_type: "string"

  - engine: "postgresql"
    queries: "db/peer/query.sql"
    schema: "db/peer/schema.sql"
    gen:
      go:
        package: "dbPeer"
        out: "internal/db/peer"
        emit_prepared_queries: false
        overrides:
          - db_type: "jsonb"
            go_type: "encoding/json.RawMessage"
          - db_type: "text"
            go_type: "string"
